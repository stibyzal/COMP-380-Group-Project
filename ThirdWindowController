package com.example.projcomp380;

import javafx.event.ActionEvent;
import javafx.fxml.FXML;
import javafx.fxml.FXMLLoader;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.TextField;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.text.Text;
import javafx.stage.Stage;

public class ThirdWindowController {

    @FXML
    private TextField emailText;

    @FXML
    private TextField billAddText;

    @FXML
    private TextField cvvText;

    @FXML
    private TextField expYearText;

    @FXML
    private TextField expMonthText;

    @FXML
    private TextField cardNumText;

    @FXML
    private TextField firstNameText;

    @FXML
    private TextField lastNameText;

    @FXML
    private TextField phoneNumText;

    @FXML
    private Text checkInLabel;

    @FXML
    private Text checkOutLabel;

    @FXML
    private Text nightsAndGuestsLabel;

    @FXML
    private Text roomLabel;

    @FXML
    private Button cancelButton;

    @FXML
    private ImageView roomChosenPhoto;

    @FXML
    private Button bookButton;


    public Reservation finalRes = new Reservation();

    public void reservationLabels(){
        Image myImage = new Image(getClass().getResourceAsStream("/com/example/projcomp380/placeholder.jpg"), 380, 190, false, false);
        roomChosenPhoto.setImage(myImage);

        //reservation stuff
        nightsAndGuestsLabel.setText(finalRes.getLengthOfStay() + " nights, " + finalRes.getNumGuests() + " guests");
        checkInLabel.setText(finalRes.getCheckInDate());
        checkOutLabel.setText(finalRes.getCheckOutDate());

    }

    //this will go to the next window and updates all customer and payment info
    @FXML
    protected void reservationConfirmedClick(ActionEvent actionEvent) throws Exception {
        FXMLLoader fxmlLoader = new FXMLLoader(MainWindow.class.getResource("fourth-window.fxml"));
        Scene scene = new Scene(fxmlLoader.load());

        FourthWindowController fourthWindowController = fxmlLoader.getController();
        //customer stuff
        fourthWindowController.finalCus.setName(firstNameText.getText());
        fourthWindowController.finalCus.setLastName(lastNameText.getText());
        fourthWindowController.finalCus.setEmail(emailText.getText());
        fourthWindowController.finalCus.setPhoneNumber(phoneNumText.getText());

        //pay stuff
        fourthWindowController.finalPay.setCardNumber(cardNumText.getText());
        fourthWindowController.finalPay.setExpirationMonth(expMonthText.getText());
        fourthWindowController.finalPay.setExpirationYear(expYearText.getText());
        fourthWindowController.finalPay.setCvvNumber(cvvText.getText());

        //haven't done address stuff yet, gotta also update the fxml file

        Stage stage = (Stage) ((Node) actionEvent.getSource()).getScene().getWindow();
        stage.setScene(scene);
        stage.show();
    }
}
